{
  "name": "Working Model v1",
  "description": "Working Model v1",
  "modelDefinition": {
    "inputs": {
      "positionFields": ["loanNumber","principal","interestRate","termMonths","originationDate"],
      "assumptionValues": ["base_annual_rate","default_term_months"]
    },
    "derivedFields": [
      {
        "name": "annualRate",
        "expression": "(interestRate != null) ? interestRate : assume.base_annual_rate"
      },
      {
        "name": "term",
        "expression": "(termMonths != null) ? termMonths : assume.default_term_months"
      },
      {
        "name": "monthlyRate",
        "expression": "annualRate / 12"
      },
      {
        "name": "monthlyInterest",
        "expression": "principal * monthlyRate"
      },
      {
        "name": "pmt",
        "expression": "(term != null && monthlyRate != null && monthlyRate > 0) ? (principal * monthlyRate / (1 - Math.pow(1 + monthlyRate, -term))) : null"
      }
    ],
    "outputs": [
      { "name": "loanNumber",       "expression": "loanNumber" },
      { "name": "principal",        "expression": "principal" },
      { "name": "annualRate",       "expression": "annualRate" },
      { "name": "term",             "expression": "term" },
      { "name": "monthlyRate",      "expression": "monthlyRate" },
      { "name": "monthlyInterest",  "expression": "monthlyInterest" },
      { "name": "pmt",              "expression": "pmt" }
    ]
  }
}